@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@using RealEstateListingPlatform.App.Auth
@using RealEstateListingPlatform.App.Contracts
@inject CustomStateProvider authStateProvider

<PageTitle>Home</PageTitle>

<h1>Hello, Welcome to the Real Estate Listing Platform!</h1>
<br />

<CascadingAuthenticationState>
<AuthorizeView>
    
    <Authorized>
            <button class="btn btn-lg btn-primary btn-block"  @onclick="Logout">Logout</button>
    </Authorized>

    <NotAuthorized>
            <button class="btn btn-lg btn-primary btn-block" @onclick="NavigateToLogin">Click here to log in</button>
        <br />
            <button class="btn btn-lg btn-primary btn-block" @onclick="NavigateToRegister">Click here to register</button>
    </NotAuthorized>

</AuthorizeView>
</CascadingAuthenticationState>

@functions{

    [Inject]
    public NavigationManager NavigationManager { get; set; }


    private void NavigateToLogin()
    {
        NavigationManager.NavigateTo("/login");
    }

    private void NavigateToRegister()
    {
        NavigationManager.NavigateTo("/register");
    }

    private async Task Logout()
    {
        await authStateProvider.Logout();
        NavigationManager.NavigateTo("/login");
    }


}
